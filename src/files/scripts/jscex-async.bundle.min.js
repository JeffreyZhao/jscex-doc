(function(){var b={ALL:0,TRACE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5,OFF:100},c=function(){this.level=b.DEBUG};c.prototype={log:function(a,b){if(this.level<=a)try{console.log(b)}catch(d){}},trace:function(a){this.log(b.TRACE,a)},debug:function(a){this.log(b.DEBUG,a)},info:function(a){this.log(b.INFO,a)},warn:function(a){this.log(b.WARN,a)},error:function(a){this.log(b.ERROR,a)}};var d=function(a){a.Logging={Logger:c,Level:b};a.logger=new c;a.modules={};a.binders={};a.builders={}},e=typeof define==="function"&&
!define.amd,f=typeof require==="function"&&typeof define==="function"&&define.amd;typeof require==="function"&&typeof module!=="undefined"&&module.exports?d(module.exports):e?define("jscex",function(a,b,c){d(c.exports)}):f?define("jscex",function(){var a={};d(a);return a}):(typeof Jscex=="undefined"&&(Jscex={}),d(Jscex))})();

(function(){var j=function(){};j.prototype={For:function(b,d,a){return{next:function(c,e){var g=function(f){try{d&&!f&&d.call(c),!b||b.call(c)?a.next(c,function(c,a){if(c=="normal"||c=="continue")g(!1);else if(c=="throw"||c=="return")e(c,a);else if(c=="break")e("normal");else throw Error('Invalid type for "Loop": '+c);}):e("normal")}catch(h){e("throw",h)}};g(!0)}}},ForIn:function(b,d){return{next:function(a,c){var e=[],g;for(g in b)e.push(g);var f=function(b){try{b<e.length?d(e[b]).next(a,function(a,
e){if(a=="normal"||a=="continue")f(b+1);else if(a=="throw"||a=="return")c(a,e);else if(a=="break")c("normal");else throw Error('Invalid type for "Loop": '+a);}):c("normal")}catch(g){c("throw",g)}};f(0)}}},While:function(b,d){return{next:function(a,c){var e=function(){try{b.call(a)?d.next(a,function(a,b){if(a=="normal"||a=="continue")e();else if(a=="throw"||a=="return")c(a,b);else if(a=="break")c("normal");else throw Error('Invalid type for "Loop": '+a);}):c("normal")}catch(g){c("throw",g)}};e()}}},
Do:function(b,d){return{next:function(a,c){var e=function(){b.next(a,function(b,f){if(b=="normal"||b=="continue")try{d.call(a)?e():c("normal")}catch(h){c("throw",h)}else if(b=="throw"||b=="return")c(b,f);else if(b=="break")c("normal");else throw Error('Invalid type for "Loop": '+b);})};e()}}},Delay:function(b){return{next:function(d,a){try{b.call(d).next(d,a)}catch(c){a("throw",c)}}}},Combine:function(b,d){return{next:function(a,c){b.next(a,function(b,g,f){if(b=="normal")try{d.next(a,c)}catch(h){c("throw",
h)}else c(b,g,f)})}}},Return:function(b){return{next:function(d,a){a("return",b)}}},Normal:function(){return{next:function(b,d){d("normal")}}},Break:function(){return{next:function(b,d){d("break")}}},Continue:function(){return{next:function(b,d){d("continue")}}},Throw:function(b){return{next:function(d,a){a("throw",b)}}},Try:function(b,d,a){return{next:function(c,e){b.next(c,function(b,f,h){if(b!="throw"||!d)a?a.next(c,function(a,c,d){a=="normal"?e(b,f,h):e(a,c,d)}):e(b,f,h);else if(d){var i;try{i=
d.call(c,f)}catch(j){a?a.next(c,function(a,b,c){a=="normal"?e("throw",j):e(a,b,c)}):e("throw",j)}i&&i.next(c,function(b,d,f){b=="throw"?a?a.next(c,function(a,c,g){a=="normal"?e(b,d,f):e(a,c,g)}):e(b,d,f):a?a.next(c,function(a,c,g){a=="normal"?e(b,d,f):e(a,c,g)}):e(b,d,f)})}else a.next(c,function(a,c,d){a=="normal"?e(b,f,h):e(a,c,d)})})}}}};var i=function(b){if(!b.modules)b.modules={};if(!b.modules.builderbase)b.modules.builderbase=!0,b.BuilderBase=j},k=typeof define==="function"&&!define.amd,l=typeof require===
"function"&&typeof define==="function"&&define.amd;if(typeof require==="function"&&typeof module!=="undefined"&&module.exports)module.exports.init=i;else if(k)define("jscex-builderbase",function(b,d,a){a.exports.init=i});else if(l)define("jscex-builderbase",function(){return{init:i}});else{if(typeof Jscex==="undefined")throw Error('Missing the root object, please load "jscex" module first.');i(Jscex)}})();

(function(){var k=function(a){return a._typeId=="670a1076-712b-4edd-9b70-64b152fe1cd9"},j=function(){};j.prototype={isTypeOf:k,_typeId:"670a1076-712b-4edd-9b70-64b152fe1cd9",message:"The task has been cancelled."};typeof __jscex__async__taskIdSeed==="undefined"&&(__jscex__async__taskIdSeed=0);var m=function(a){return typeof a.start==="function"&&typeof a.addEventListener==="function"&&typeof a.removeEventListener==="function"&&typeof a.complete==="function"},i=function(a){if(!a.modules.async){var f=
function(){};f.prototype={register:function(b){this.isCancellationRequested&&b();if(!this._handlers)this._handlers=[];this._handlers.push(b)},unregister:function(b){this._handlers&&(b=this._handlers.indexOf(b),b>=0&&this._handlers.splice(b,1))},cancel:function(){if(!this.isCancellationRequested){this.isCancellationRequested=!0;var b=this._handlers;delete this._handlers;for(var e=0;e<b.length;e++)try{b[e]()}catch(c){a.logger.warn("[WARNING] Cancellation handler threw an error: "+c)}}},throwIfCancellationRequested:function(){if(this.isCancellationRequested)throw new j;
}};var d=function(b){this.id=++__jscex__async__taskIdSeed;this._delegate=b;this._listeners={};this.status="ready"};d.prototype={start:function(){if(this.status!="ready")throw Error('Task can only be started in "ready" status.');this.status="running";this._delegate(this);return this},complete:function(b,e){if(this.status!="running")throw Error('The "complete" method can only be called in "running" status.');var c=this._listeners;delete this._listeners;if(b=="success")this.result=e,this.status="succeeded",
this._notify("success",c.success);else if(b=="failure")this.error=e,this.status=k(e)?"canceled":"faulted",this._notify("failure",c.failure);else throw Error("Unsupported type: "+b);this._notify("complete",c.complete);this.error&&!c.failure&&!c.complete&&a.logger.warn("[WARNING] An unhandled error occurred: "+this.error)},_notify:function(b,a){if(a)for(var c=0;c<a.length;c++)a[c].call(this)},addEventListener:function(b,a){if(!this._listeners)return this;this._listeners[b]||(this._listeners[b]=[]);
this._listeners[b].push(a);return this},removeEventListener:function(a,e){if(!this._listeners)return this;var c=this._listeners[a];if(!c)return this;var l=c.indexOf(e);l>=0&&c.splice(l,1);return this}};d.create=function(a){return new d(a)};d.isTask=m;var h=function(){};h.prototype={Start:function(a,e){return d.create(function(c){e.next(a,function(a,b){if(a=="normal"||a=="return")c.complete("success",b);else if(a=="throw")c.complete("failure",b);else throw Error("Unsupported type: "+a);})})},Bind:function(a,
e){return{next:function(c,d){var f=function(){if(this.error)d("throw",this.error);else{var a;try{a=e.call(c,this.result)}catch(b){d("throw",b);return}a.next(c,d)}};a.status=="ready"?(a.addEventListener("complete",f),a.start()):a.status=="running"?a.addEventListener("complete",f):f(a)}}}};for(var g in a.BuilderBase.prototype)h.prototype[g]=a.BuilderBase.prototype[g];if(!a.Async)a.Async={};g=a.Async;g.CancellationToken=f;g.CanceledError=j;g.Task=d;g.AsyncBuilder=h;if(!a.builders)a.builders={};a.binders.async=
"$await";a.builders.async=new h;a.modules.async=!0}},n=typeof define==="function"&&!define.amd,o=typeof require==="function"&&typeof define==="function"&&define.amd;if(typeof require==="function"&&typeof module!=="undefined"&&module.exports)module.exports.init=function(a){if(!a.modules.builderbase){if(typeof __dirname==="string")try{require.paths.unshift(__dirname)}catch(f){try{module.paths.unshift(__dirname)}catch(d){}}require("jscex-builderbase").init(a)}i(a)};else if(n)define("jscex-async",["jscex-builderbase"],
function(a,f,d){d.exports.init=function(d){d.modules.builderbase||a("jscex-builderbase").init(d);i(d)}});else if(o)define("jscex-async",["jscex-builderbase"],function(a){return{init:function(f){f.modules.builderbase||a.init(f);i(f)}}});else{if(typeof Jscex==="undefined")throw Error('Missing the root object, please load "jscex" module first.');if(!Jscex.modules.builderbase)throw Error('Missing essential components, please initialize "builderbase" module first.');i(Jscex)}})();

(function(){var l=function(g){this.children=[];if(g)for(var b=0;b<g.length;b++)this.children.push(g[b])};l.prototype={_typeId:"4a73efb8-c2e2-4305-a05c-72385288650a",message:"This is an error contains sub-errors, please check the 'children' collection for more details.",isTypeOf:function(g){return g._typeId=="4a73efb8-c2e2-4305-a05c-72385288650a"}};var n=function(g){if(g.length<=1)return null;for(var b=[],c=1;c<g.length;c++)b.push(g[c]);return b},o=function(g,b){for(var c=[],i=0;i<g.length;i++)c.push(g[i]);
for(;c.length<b;)c.push(void 0);return c},k=function(g){if(!g.modules["async-powerpack"]){if(!g.modules.async)throw Error('Missing essential components, please initialize "jscex-async" module first.');var b=g.Async,c=b.Task,i=b.CanceledError;b.AggregateError=l;b.sleep=function(e,a){return c.create(function(c){a&&a.isCancellationRequested&&c.complete("failure",new i);var d,h;a&&(h=function(){clearTimeout(d);c.complete("failure",new i)});d=setTimeout(function(){a&&a.unregister(h);c.complete("success")},
e);a&&a.register(h)})};b.onEvent=function(e,a,j){return c.create(function(d){j&&j.isCancellationRequested&&d.complete("failure",new i);var h=function(){e.removeEventListener?e.removeEventListener(a,f):e.removeListener?e.removeListener(a,f):e.detachEvent(a,f)},f,c;j&&(c=function(){h();d.complete("failure",new i)});f=function(a){j&&j.unregister(c);h();d.complete("success",a)};e.addEventListener?e.addEventListener(a,f):e.addListener?e.addListener(a,f):e.attachEvent(a,f);j&&j.register(c)})};c.whenAll=
function(){var e;if(arguments.length==1){var a=arguments[0];e=c.isTask(a)?[a]:a}else{e=Array(arguments.length);for(a=0;a<arguments.length;a++)e[a]=arguments[a]}return c.create(function(a){var d={},h;for(h in e)if(e.hasOwnProperty(h)){var f=e[h];f&&(c.isTask(f)||(e[h]=f=c.whenAll(f)),d[f.id]=h)}for(var b in d)d.hasOwnProperty(b)&&(f=e[d[b]],f.status=="ready"&&f.start());var g=function(){var f=Object.prototype.toString.call(e)==="[object Array]"?Array(e.length):{},c=[],h;for(h in d)if(d.hasOwnProperty(h)){var b=
d[h],g=e[b];g.error?c.push(g.error):f[b]=g.result}c.length>0?a.complete("failure",new l(c)):a.complete("success",f)},m=0;for(b in d)d.hasOwnProperty(b)&&(h=d[b],f=e[h],f.status=="running"&&(m++,f.addEventListener("complete",function(){--m==0&&g()})));m==0&&g()})};c.whenAny=function(){var e={};if(arguments.length==1){var a=arguments[0];c.isTask(a)?e[0]=a:e=a}else for(a=0;a<arguments.length;a++)e[a]=arguments[a];return c.create(function(a){var d={},h;for(h in e)if(e.hasOwnProperty(h)){var f=e[h];c.isTask(f)&&
(d[f.id]=h)}for(var b in d)f=e[d[b]],f.status=="ready"&&f.start();for(b in d)if(h=d[b],f=e[h],f.error||f.status=="succeeded"){a.complete("success",{key:h,task:f});return}var g=function(){for(var f in d)e[d[f]].removeEventListener("complete",g);a.complete("success",{key:d[this.id],task:this})};for(b in d)e[d[b]].addEventListener("complete",g)})};if(!b.Jscexify)b.Jscexify={};b=b.Jscexify;b.fromStandard=function(e){var a=n(arguments);return function(){var b=this,d=o(arguments,e.length-1);return c.create(function(c){d.push(function(f,
e){if(f)c.complete("failure",f);else if(a){for(var b={},d=0;d<a.length;d++)b[a[d]]=arguments[d+1];return c.complete("success",b)}else c.complete("success",e)});e.apply(b,d)})}};c.prototype.then=c.prototype.continueWith=function(e){var a=this;return c.create(function(c){var d=function(){this.error?c.complete("failure",this.error):c.complete("success",this.result)},b=function(){if(this.error)return c.complete("failure",this.error);var a;try{a=e(this.result)}catch(b){return c.complete("failure",b)}a.status==
"ready"&&a.start();a.status=="running"?a.addEventListener("complete",d):d.call(a)};a.status=="ready"&&a.start();a.status=="running"?a.addEventListener("complete",b):b.call(a)})};b.fromCallback=function(b){var a=n(arguments);return function(){var g=this,d=o(arguments,b.length-1);return c.create(function(c){d.push(function(b){if(a){for(var e={},d=0;d<a.length;d++)e[a[d]]=arguments[d];c.complete("success",e)}else c.complete("success",b)});b.apply(g,d)})}};g.modules["async-powerpack"]=!0}},p=typeof define===
"function"&&!define.amd,q=typeof require==="function"&&typeof define==="function"&&define.amd;if(typeof require==="function"&&typeof module!=="undefined"&&module.exports)module.exports.init=k;else if(p)define("jscex-async-powerpack",["jscex-async"],function(g,b,c){c.exports.init=k});else if(q)define("jscex-async-powerpack",["jscex-async"],function(){return{init:k}});else{if(typeof Jscex==="undefined")throw Error('Missing the root object, please load "jscex" module first.');k(Jscex)}})();
